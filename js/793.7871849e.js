"use strict";(globalThis["webpackChunkRetro_visor"]=globalThis["webpackChunkRetro_visor"]||[]).push([[793],{8119:(t,e,s)=>{s.d(e,{Z:()=>n});var i=s(680);const n=i.Z},793:(t,e,s)=>{s.r(e),s.d(e,{default:()=>F});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[t.loading?[s("figure",[s("img",{attrs:{src:t.baseUrl+"img/social/"+t.loading+"-color.svg",alt:"Rede social"}}),s("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)]:[s("figure",[s("img",{attrs:{src:t.baseUrl+"img/icons/android-chrome-192x192.png",alt:t.appName}}),s("figcaption",[s("h1",[t._v(t._s(t.appName))])])]),s("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[s("v-tab-item",[s("p",[t._v("Entre com uma de suas redes sociais")]),t._l(t.providers,(function(e,i){return s("v-btn",{key:i,class:e,attrs:{fab:""},on:{click:function(s){return t.requestLogin(e)}}},[s("img",{attrs:{src:t.baseUrl+"img/social/"+e+".svg",alt:e}})])}))],2),s("v-tab-item",[s("v-form",{ref:"form"},[s("v-text-field",{attrs:{type:"email",placeholder:"Email",rules:t.emailRules},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),s("v-text-field",{attrs:{type:t.showPassword?"search":"password",placeholder:"Senha","append-icon":t.showPassword?"visibility_off":"visibility",rules:t.passwordRules},on:{"click:append":function(e){t.showPassword=!t.showPassword}},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),s("transition",{attrs:{name:"fade"}},[t.registerFields?s("div",[s("v-text-field",{attrs:{type:t.showPassword?"search":"password",placeholder:"Senha","append-icon":t.showPassword?"visibility_off":"visibility",rules:t.passwordConfirmationRules},on:{"click:append":function(e){t.showPassword=!t.showPassword}},model:{value:t.form.passwordConfirmation,callback:function(e){t.$set(t.form,"passwordConfirmation",e)},expression:"form.passwordConfirmation"}}),s("v-text-field",{attrs:{placeholder:"Nome",rules:t.nameRules},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1):t._e()]),s("footer",[s("v-btn",{attrs:{text:""},on:{click:t.register}},[t._v("Cadastrar")]),s("v-btn",{attrs:{light:"",color:"accent"},on:{click:t.loginWithPassword}},[t._v("Entrar")])],1)],1)],1)],1),s("footer",[s("v-btn",{attrs:{block:"",text:""},on:{click:t.changeTab}},[t._v(" "+t._s(1==t.tab?"Voltar":"Ou com seu email e senha")+" ")])],1)]],2)},n=[],r=s(4147),a=s(5495),o=s(5843);const l={computed:{baseUrl(){return"/retro-visor/"}},data(){return{appName:r.name,loading:null,providers:["google","microsoft","facebook","twitter"],tab:0,showPassword:!1,registerFields:!1,form:{name:null,email:null,password:null,passwordConfirmation:null},nameRules:[t=>!!t||"Informe seu nome"],emailRules:[t=>!!t||"Informe seu email",t=>/\S+@\S+\.\S+/.test(t)||"Informe um email válido"],passwordRules:[t=>!!t||"Informe sua senha",t=>t?.length>=6||"A senha deve ter ao menos 6 caracteres"],passwordConfirmationRules:[t=>!!t||"Confirme sua senha",t=>t==this.form.password||"As senhas não coincidem",t=>t?.length>=6||"A senha deve ter ao menos 6 caracteres"]}},mounted(){this.$route.params.provider&&this.continueSocialLogin()},methods:{requestLogin(t){this.loading=t,this.$router.push({params:{provider:t}}).catch((t=>{})),"google"==t&&(t=new o.hJ),"facebook"==t&&(t=new o._O),"microsoft"==t&&(t=new o.O4("microsoft.com")),"twitter"==t&&(t=new o.c4),(0,o.F6)(a.I8,t)},continueSocialLogin(){this.loading=this.$route.params.provider,(0,o.cx)(a.I8).then((t=>{if(!t)return;let e={name:t.user.providerData[0].displayName,socialId:t.user.providerData[0].uid,provider:t.providerId.replace(".com",""),email:t.user.providerData[0].email};return this.axios.post("/authenticate",e).then((t=>{this.$auth.authenticate(t.data)}))})).catch((t=>{this.$store.dispatch("openAlert",{text:"Falha ao fazer o login. Tente novamente",color:"error"})})).finally((()=>{this.loading=null}))},loginWithPassword(){this.loading="password",(0,o.e5)(a.I8,this.form.email,this.form.password).then((t=>{let e={name:t.user.providerData[0].displayName,socialId:t.user.uid,provider:"password",email:t.user.providerData[0].email};return this.axios.post("/authenticate",e).then((t=>{this.$auth.authenticate(t.data)}))})).catch((t=>{t?.message?.includes("user-not-found")?this.$store.dispatch("openAlert",{text:"Email ou senha inválidos",color:"error"}):this.$store.dispatch("openAlert",{text:"Falha ao fazer o login. Tente novamente",color:"error"})})).finally((()=>{this.loading=null}))},register(){if(!this.registerFields)return this.registerFields=!0;this.$refs.form.validate()&&this.form.password==this.form.passwordConfirmation&&(this.loading="password",(0,o.Xb)(a.I8,this.form.email,this.form.password).then((()=>(0,o.ck)(a.I8.currentUser,{displayName:this.form.name}))).then((()=>{this.loginWithPassword()})).catch((t=>{this.loading=null,t?.message?.includes("weak-password")?this.$store.dispatch("openAlert",{text:"A senha deve ter ao menos 6 caracteres",color:"error"}):t?.message?.includes("email-already-in-use")?this.$store.dispatch("openAlert",{text:"Esse email já está em uso",color:"error"}):this.$store.dispatch("openAlert",{text:"Falha ao cadastrar. Tente novamente",color:"error"})})))},changeTab(){this.tab=0==this.tab?1:0,this.registerFields=!1,this.showPassword=!1}}},h=l;var d=s(1001),c=s(3453),u=s.n(c),p=s(680),m=s(3325),v=s(6210),f=s(6257);const g=(0,m.Z)(v.Z,(0,f.J)("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>t.$watch("hasError",(e=>{this.$set(this.errorBag,t._uid,e)}),{immediate:!0}),s={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?s.shouldValidate=t.$watch("shouldValidate",(i=>{i&&(this.errorBag.hasOwnProperty(t._uid)||(s.valid=e(t)))})):s.valid=e(t),s},validate(){return 0===this.inputs.filter((t=>!t.validate(!0))).length},reset(){this.inputs.forEach((t=>t.reset())),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout((()=>{this.errorBag={}}),0)},resetValidation(){this.inputs.forEach((t=>t.resetValidation())),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find((e=>e._uid===t._uid));if(!e)return;const s=this.watchers.find((t=>t._uid===e._uid));s&&(s.valid(),s.shouldValidate()),this.watchers=this.watchers.filter((t=>t._uid!==e._uid)),this.inputs=this.inputs.filter((t=>t._uid!==e._uid)),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},this.$slots.default)}});var w=s(3377),b=s(2529),y=s(8085),x=s(4589);const $=(0,m.Z)(w.Z,b.Z,y.Z).extend({name:"VSkeletonLoader",props:{boilerplate:Boolean,loading:Boolean,tile:Boolean,transition:String,type:String,types:{type:Object,default:()=>({})}},computed:{attrs(){return this.isLoading?this.boilerplate?{}:{"aria-busy":!0,"aria-live":"polite",role:"alert",...this.$attrs}:this.$attrs},classes(){return{"v-skeleton-loader--boilerplate":this.boilerplate,"v-skeleton-loader--is-loading":this.isLoading,"v-skeleton-loader--tile":this.tile,...this.themeClasses,...this.elevationClasses}},isLoading(){return!("default"in this.$scopedSlots)||this.loading},rootTypes(){return{actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, card-heading","card-avatar":"image, list-item-avatar","card-heading":"heading",chip:"chip","date-picker":"list-item, card-heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",paragraph:"text@3",sentences:"text@2",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"heading, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"table-cell@6","table-cell":"text","table-tfoot":"text@2, avatar@2",text:"text",...this.types}}},methods:{genBone(t,e){return this.$createElement("div",{staticClass:`v-skeleton-loader__${t} v-skeleton-loader__bone`},e)},genBones(t){const[e,s]=t.split("@"),i=()=>this.genStructure(e);return Array.from({length:s}).map(i)},genStructure(t){let e=[];t=t||this.type||"";const s=this.rootTypes[t]||"";if(t===s);else{if(t.indexOf(",")>-1)return this.mapBones(t);if(t.indexOf("@")>-1)return this.genBones(t);s.indexOf(",")>-1?e=this.mapBones(s):s.indexOf("@")>-1?e=this.genBones(s):s&&e.push(this.genStructure(s))}return[this.genBone(t,e)]},genSkeleton(){const t=[];return this.isLoading?t.push(this.genStructure()):t.push((0,x.z9)(this)),this.transition?this.$createElement("transition",{props:{name:this.transition},on:{afterEnter:this.resetStyles,beforeEnter:this.onBeforeEnter,beforeLeave:this.onBeforeLeave,leaveCancelled:this.resetStyles}},t):t},mapBones(t){return t.replace(/\s/g,"").split(",").map(this.genStructure)},onBeforeEnter(t){this.resetStyles(t),this.isLoading&&(t._initialStyle={display:t.style.display,transition:t.style.transition},t.style.setProperty("transition","none","important"))},onBeforeLeave(t){t.style.setProperty("display","none","important")},resetStyles(t){t._initialStyle&&(t.style.display=t._initialStyle.display||"",t.style.transition=t._initialStyle.transition,delete t._initialStyle)}},render(t){return t("div",{staticClass:"v-skeleton-loader",attrs:this.attrs,on:this.$listeners,class:this.classes,style:this.isLoading?this.measurableStyles:void 0},[this.genSkeleton()])}});var _=s(8625),B=s(7352);const I=t=>{const{touchstartX:e,touchendX:s,touchstartY:i,touchendY:n}=t,r=.5,a=16;t.offsetX=s-e,t.offsetY=n-i,Math.abs(t.offsetY)<r*Math.abs(t.offsetX)&&(t.left&&s<e-a&&t.left(t),t.right&&s>e+a&&t.right(t)),Math.abs(t.offsetX)<r*Math.abs(t.offsetY)&&(t.up&&n<i-a&&t.up(t),t.down&&n>i+a&&t.down(t))};function T(t,e){const s=t.changedTouches[0];e.touchstartX=s.clientX,e.touchstartY=s.clientY,e.start&&e.start(Object.assign(t,e))}function k(t,e){const s=t.changedTouches[0];e.touchendX=s.clientX,e.touchendY=s.clientY,e.end&&e.end(Object.assign(t,e)),I(e)}function C(t,e){const s=t.changedTouches[0];e.touchmoveX=s.clientX,e.touchmoveY=s.clientY,e.move&&e.move(Object.assign(t,e))}function S(t){const e={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:t.left,right:t.right,up:t.up,down:t.down,start:t.start,move:t.move,end:t.end};return{touchstart:t=>T(t,e),touchend:t=>k(t,e),touchmove:t=>C(t,e)}}function E(t,e,s){const i=e.value,n=i.parent?t.parentElement:t,r=i.options||{passive:!0};if(!n)return;const a=S(e.value);n._touchHandlers=Object(n._touchHandlers),n._touchHandlers[s.context._uid]=a,(0,x.XP)(a).forEach((t=>{n.addEventListener(t,a[t],r)}))}function P(t,e,s){const i=e.value.parent?t.parentElement:t;if(!i||!i._touchHandlers)return;const n=i._touchHandlers[s.context._uid];(0,x.XP)(n).forEach((t=>{i.removeEventListener(t,n[t])})),delete i._touchHandlers[s.context._uid]}const A={inserted:E,unbind:P},V=A,L=(0,m.Z)(_.Z,(0,B.d)("windowGroup","v-window-item","v-window")),R=L.extend().extend().extend({name:"v-window-item",directives:{Touch:V},props:{disabled:Boolean,reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},value:{required:!1}},data(){return{isActive:!1,inTransition:!1}},computed:{classes(){return this.groupClasses},computedTransition(){return this.windowGroup.internalReverse?"undefined"!==typeof this.reverseTransition?this.reverseTransition||"":this.windowGroup.computedTransition:"undefined"!==typeof this.transition?this.transition||"":this.windowGroup.computedTransition}},methods:{genDefaultSlot(){return this.$slots.default},genWindowItem(){return this.$createElement("div",{staticClass:"v-window-item",class:this.classes,directives:[{name:"show",value:this.isActive}],on:this.$listeners},this.genDefaultSlot())},onAfterTransition(){this.inTransition&&(this.inTransition=!1,this.windowGroup.transitionCount>0&&(this.windowGroup.transitionCount--,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=void 0)))},onBeforeTransition(){this.inTransition||(this.inTransition=!0,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=(0,x.kb)(this.windowGroup.$el.clientHeight)),this.windowGroup.transitionCount++)},onTransitionCancelled(){this.onAfterTransition()},onEnter(t){this.inTransition&&this.$nextTick((()=>{this.computedTransition&&this.inTransition&&(this.windowGroup.transitionHeight=(0,x.kb)(t.clientHeight))}))}},render(t){return t("transition",{props:{name:this.computedTransition},on:{beforeEnter:this.onBeforeTransition,afterEnter:this.onAfterTransition,enterCancelled:this.onTransitionCancelled,beforeLeave:this.onBeforeTransition,afterLeave:this.onAfterTransition,leaveCancelled:this.onTransitionCancelled,enter:this.onEnter}},this.showLazyContent((()=>[this.genWindowItem()])))}}),X=R.extend({name:"v-tab-item",props:{id:String},methods:{genWindowItem(){const t=R.options.methods.genWindowItem.call(this);return t.data.domProps=t.data.domProps||{},t.data.domProps.id=this.id||this.value,t}}});var H=s(8119),O=s(172),Y=s(4622);const Z=Y.y.extend({name:"v-window",directives:{Touch:V},provide(){return{windowGroup:this}},props:{activeClass:{type:String,default:"v-window-item--active"},continuous:Boolean,mandatory:{type:Boolean,default:!0},nextIcon:{type:[Boolean,String],default:"$next"},prevIcon:{type:[Boolean,String],default:"$prev"},reverse:Boolean,showArrows:Boolean,showArrowsOnHover:Boolean,touch:Object,touchless:Boolean,value:{required:!1},vertical:Boolean},data(){return{changedByDelimiters:!1,internalHeight:void 0,transitionHeight:void 0,transitionCount:0,isBooted:!1,isReverse:!1}},computed:{isActive(){return this.transitionCount>0},classes(){return{...Y.y.options.computed.classes.call(this),"v-window--show-arrows-on-hover":this.showArrowsOnHover}},computedTransition(){if(!this.isBooted)return"";const t=this.vertical?"y":"x",e=this.internalReverse?!this.isReverse:this.isReverse,s=e?"-reverse":"";return`v-window-${t}${s}-transition`},hasActiveItems(){return Boolean(this.items.find((t=>!t.disabled)))},hasNext(){return this.continuous||this.internalIndex<this.items.length-1},hasPrev(){return this.continuous||this.internalIndex>0},internalIndex(){return this.items.findIndex(((t,e)=>this.internalValue===this.getValue(t,e)))},internalReverse(){return this.$vuetify.rtl?!this.reverse:this.reverse}},watch:{internalIndex(t,e){this.isReverse=this.updateReverse(t,e)}},mounted(){window.requestAnimationFrame((()=>this.isBooted=!0))},methods:{genDefaultSlot(){return this.$slots.default},genContainer(){const t=[this.genDefaultSlot()];return this.showArrows&&t.push(this.genControlIcons()),this.$createElement("div",{staticClass:"v-window__container",class:{"v-window__container--is-active":this.isActive},style:{height:this.internalHeight||this.transitionHeight}},t)},genIcon(t,e,s){var i,n,r;const a={click:t=>{t.stopPropagation(),this.changedByDelimiters=!0,s()}},o={"aria-label":this.$vuetify.lang.t(`$vuetify.carousel.${t}`)},l=null!=(i=null==(n=(r=this.$scopedSlots)[t])?void 0:n.call(r,{on:a,attrs:o}))?i:[this.$createElement(H.Z,{props:{icon:!0},attrs:o,on:a},[this.$createElement(O.Z,{props:{large:!0}},e)])];return this.$createElement("div",{staticClass:`v-window__${t}`},l)},genControlIcons(){const t=[],e=this.$vuetify.rtl?this.nextIcon:this.prevIcon;if(this.hasPrev&&e&&"string"===typeof e){const s=this.genIcon("prev",e,this.prev);s&&t.push(s)}const s=this.$vuetify.rtl?this.prevIcon:this.nextIcon;if(this.hasNext&&s&&"string"===typeof s){const e=this.genIcon("next",s,this.next);e&&t.push(e)}return t},getNextIndex(t){const e=(t+1)%this.items.length,s=this.items[e];return s.disabled?this.getNextIndex(e):e},getPrevIndex(t){const e=(t+this.items.length-1)%this.items.length,s=this.items[e];return s.disabled?this.getPrevIndex(e):e},next(){if(!this.hasActiveItems||!this.hasNext)return;const t=this.getNextIndex(this.internalIndex),e=this.items[t];this.internalValue=this.getValue(e,t)},prev(){if(!this.hasActiveItems||!this.hasPrev)return;const t=this.getPrevIndex(this.internalIndex),e=this.items[t];this.internalValue=this.getValue(e,t)},updateReverse(t,e){const s=this.items.length,i=s-1;return s<=2?t<e:t===i&&0===e||(0!==t||e!==i)&&t<e}},render(t){const e={staticClass:"v-window",class:this.classes,directives:[]};if(!this.touchless){const t=this.touch||{left:()=>{this.$vuetify.rtl?this.prev():this.next()},right:()=>{this.$vuetify.rtl?this.next():this.prev()},end:t=>{t.stopPropagation()},start:t=>{t.stopPropagation()}};e.directives.push({name:"touch",value:t})}return t("div",e,[this.genContainer()])}}),G=Z.extend({name:"v-tabs-items",props:{mandatory:{type:Boolean,default:!1}},computed:{classes(){return{...Z.options.computed.classes.call(this),"v-tabs-items":!0}},isDark(){return this.rootIsDark}},methods:{getValue(t,e){return t.id||Y.y.options.methods.getValue.call(this,t,e)}}});var D=s(5978),N=(0,d.Z)(h,i,n,!1,null,"7566349c",null);const F=N.exports;u()(N,{VBtn:p.Z,VForm:g,VSkeletonLoader:$,VTabItem:X,VTabsItems:G,VTextField:D.Z})}}]);